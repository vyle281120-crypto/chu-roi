<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>QR Ch·ªØ R∆°i</title>

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    touch-action: none;
}

/* TI√äU ƒê·ªÄ */
#title {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    font-weight: 900;
    font-size: 52px;
    letter-spacing: 2px;
    opacity: 0;
    animation: fadeIn 2s forwards;
    z-index: 10;
}

#title span {
    display: block;
    font-size: 36px;
    margin-top: 10px;
}

@keyframes fadeIn {
    to { opacity: 1; }
}

/* CH·ªÆ R∆†I */
.word {
    position: absolute;
    font-size: 22px;
    white-space: nowrap;
    pointer-events: none;
    transform-style: preserve-3d;
    transition: color 2s linear;
}
</style>
</head>

<body>

<div id="title">
    HAPPY BIRTHDAY
    <span>üéâ C·ª§C C∆ØNG C·ª¶A EM üéâ</span>
</div>

<script>
const texts = [
    "V·ª£ Y√™u Anh ‚ù§Ô∏è",
    "V·ªÅ nh√† c·∫©n th·∫≠n anh nh√© üå∏",
    "Em l√† nh√† c·ªßa anh üåà",
    "Anh l√† c·ªßa em üî•"
];

const pastelColors = [
    "#ffd6e0", "#c8f7dc", "#d6e4ff", "#fff1c1", "#f3d1ff"
];

const words = [];
const MAX_WORDS = 130;

let lastX = 0;
let rotateYScene = 0;

// T·∫†O CH·ªÆ / TIM
function spawnWord() {
    if (words.length >= MAX_WORDS) return;

    const isHeart = Math.random() < 0.25; // ‚ù§Ô∏è 25%
    const div = document.createElement("div");
    div.className = "word";

    div.innerText = isHeart ? "‚ù§Ô∏è" :
        texts[Math.floor(Math.random() * texts.length)];

    div.style.fontSize = isHeart ? "28px" : "22px";

    // GI√ÉN NGANG
    let x = lastX + 120 + Math.random() * 80;
    if (x > window.innerWidth - 150) x = Math.random() * 100;
    lastX = x;

    const z = Math.random() * 400 - 200;

    div.style.left = x + "px";
    div.style.top = "-40px";
    div.style.color = pastelColors[Math.floor(Math.random() * pastelColors.length)];

    document.body.appendChild(div);

    words.push({
        el: div,
        y: -40,
        z: z,
        speed: 0.5 + Math.random() * 1.0
    });
}

// B·∫ÆT ƒê·∫¶U R∆†I SAU TI√äU ƒê·ªÄ
setTimeout(() => {
    setInterval(spawnWord, 230);
}, 2600);

// VU·ªêT / K√âO XOAY KH√îNG GIAN
let isDragging = false;
let startX = 0;

document.addEventListener("pointerdown", e => {
    isDragging = true;
    startX = e.clientX;
});

document.addEventListener("pointermove", e => {
    if (!isDragging) return;
    rotateYScene += (e.clientX - startX) * 0.03;
    startX = e.clientX;
});

document.addEventListener("pointerup", () => isDragging = false);

// ANIMATION
function animate() {
    for (let i = words.length - 1; i >= 0; i--) {
        const w = words[i];
        w.y += w.speed;

        // m·ªù d·∫ßn khi r∆°i
        const opacity = Math.max(0, 1 - w.y / window.innerHeight);
        w.el.style.opacity = opacity;

        const ry = Math.sin(w.y / 80) * 8 + rotateYScene;
        const rx = Math.cos(w.y / 100) * 5;

        w.el.style.top = w.y + "px";
        w.el.style.transform =
            `translateZ(${w.z}px) rotateY(${ry}deg) rotateX(${rx}deg)`;

        // ƒë·ªïi m√†u pastel ch·∫≠m
        if (Math.random() < 0.01) {
            w.el.style.color =
                pastelColors[Math.floor(Math.random() * pastelColors.length)];
        }

        if (w.y > window.innerHeight + 60) {
            w.el.remove();
            words.splice(i, 1);
        }
    }
    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>

